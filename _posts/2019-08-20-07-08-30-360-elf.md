---
layout: post
author: 'Wu Zhangjin'
title: "码农自我修养之「ELF 剖析」火热报名中"
draft: false
top: true
license: "cc-by-nc-nd-4.0"
permalink: /360-elf/
description: "泰晓科技 与 与阅码场合作推出『360° 剖析 Linux ELF』（简称 “ELF 剖析”）视频课程，早鸟价开放报名中，另有本站专属折扣码赠送。"
category:
  - 视频课程
tags:
  - Linux
  - ELF
  - 泰晓科技
  - 阅码场
  - 宋老师
  - 吴章金
  - Falcon
  - 360° 剖析
---

> By Falcon of [TinyLab.org][1]
> Aug 20, 2019

## 课程简介

近日，泰晓科技 与 “Linux 阅码场” 强强联合，首度推出 [『360° 剖析 Linux ELF』](https://www.yomocode.com/courses/9)（简称 “ELF 剖析”） 在线视频课程。

该课程由泰晓科技创始人（前魅族 Linux 内核团队技术总监）吴章金老师主讲。

课程将于 2019 年 10 月 19 日正式在线开课，目前正在开放报名中……

点击 **[报名方式](http://tinylab.org/360-elf/#%E6%8A%A5%E5%90%8D%E6%96%B9%E5%BC%8F)** 立即享受早鸟优惠价。早鸟优惠预计在 10 天后关闭。

阅读下文可进一步了解课程详情。

## 课程背景

**关于 “阅码场” 平台**

阅码场平台提供优质的课程，全部都由业界拥有 10 年以上工作经验的一线资深工程师开课，强调内容能直接用于工程实战而不是泛泛而谈。

**关于 “ELF 剖析” 课程**

作为嵌入式软件工程师，对于一些非常基础的知识点，有没有经常觉得似懂非懂，似是而非呢？

很多知识点，好像以前都学过，但是去分析和解决实际问题的时候，经常碰到：

- C 语言程序的入口是 main 函数，真地是这样吗？
- main 函数末尾必须加 `return 0` 吗，为什么？
- GCC 默认生成的 a.out 是 a.out 格式吗？
- Heap 与 Stack, Bss 与 Data 傻傻分不清！
- 碰到 Segmentation Fault, Stack Overflow 常常不知所措；
- 缓冲区注入攻击是什么东东，如何检测缓冲区溢出？
- 偶尔要用到 Linux AT&T 汇编语言或者内联汇编，怎么写，怎么学？
- 如果要让一个共享库可执行，可以做到吗？
- 如果无法获得共享库的源码，如何单独升级其中的库函数呢？
- 公司要做一个只有 8M 闪存的产品，如何下手？
- 要改变程序代码段的装载地址，该怎么做……

遇到这些问题不用灰心丧气，让我们一起来补补功课；那些曾经模棱两可的知识点，让我们以『实验』的方式都动手观察一遍，把那些模糊不清的地带摸清楚。

ELF 是 Linux 平台上最常用的一种可执行文件格式，它牵涉到程序的前世今生，所以通过剖析它，就可以把各个知识点串起来，通过工具切切实实观察程序编译和运行背后的机理，进而建立起完整的知识体系，做到知其然，也知其所以然。

该课程将以下面的问题发起：同样是打印一个 'hello' 字符串，gcc 8.3 默认生成的 a.out 有 8.3k，而裁剪到 45 字节也能实现同样功能，这 185 倍的差距是什么？

    $ gcc --version | head -1
    gcc (Ubuntu 8.3.0-16ubuntu3~16.04) 8.3.0
    $ echo -ne '#include <stdio.h>\n int main(void) { printf("hello\\n"); return 0; }' | gcc -x c - -
    $ ./a.out
    hello
    $ ls -lh a.out
    -rwxrwxr-x 1 falcon falcon 8.3K Aug 20 23:17 a.out

    $ as --32 -o hello.o hello.s
    $ ld -melf_i386 --oformat=binary -o hello hello.o
    $ PATH=./:$PWD hello 0 0 0
    hello
    $ ls -lh hello
    -rwxrwxr-x 1 falcon falcon 45 Aug 20 23:28 hello

本课程从 ELF 规范入手，从 X86 体系结构和指令集、X86 Linux AT&T 汇编，到代码预处理、编译、汇编、链接及 ELF 可执行文件的生成；再围绕 ELF 可执行文件的装载与运行，由浅入深地讲解程序加载、上下文传递、系统调用、内存布局、进程调度、代码调试以及程序退出全过程。在这个过程中，逐步讲解各知识点，并根据各知识点渐进地动手把一个 8.3k 的程序逐步瘦身到 45 个字节。通过动手实践，不仅可以掌握各种常用开发与调试工具，而且能够加深对各知识点的透彻理解。

本课程既可以顺序学习整体提升你对程序开发过程的理解，也可以针对具体问题学习具体章节。每章都有配套作业，可以在课程微信群讨论，多位 Linux 技术专家长期驻群答疑。学习本课程，一方面可以解决自己工作中遇到的具体编程问题，另一方面可以打造自下而上的完整技能体系，在专业层级（Title & Salary）上有一个质的跃升。

本课程采用 [Linux Lab](http://tinylab.org/linux-lab) 进行实验，只需一台支持 Docker 的 PC 或者笔记本，即可完成本课程所有实验。

我们准备的实验环节非常精彩，这里节选 3 个：

- 一个字节一个字节地分析，把程序从 8.3k 裁减到 45 字节
- 在最新的 Linux 系统下运行并分析上古时代的 a.out 格式
- 在一个仅有 498 行的极小 os 下装载并运行标准 ELF

## 指导老师

**[吴章金 / Falcon](http://tinylab.org/falon-and-linux)**

十三年 Linux 系统使用经验，十年 Linux 内核研发经验，六年 Linux 团队管理经验。

重度开源践行者，Linux 官方社区贡献者，前魅族 Linux 内核团队（暨BSP部）技术总监。

- 2006 年参与创建兰大开源社区，2007 年负责组建正式的校园社团，并陆续支持直到 2010 年研究生毕业。

- 2009 年到龙芯梦兰实习，在两周内完成首版龙芯实时操作系统（Linux Preempt RT）的移植，同年，为 MIPS 平台开发了 Ftrace、内核压缩等支持，全面整理了龙芯 2 系所有设备的 Linux 内核，并陆续成功往官方社区提交。2010 年发起 Linux Loongson Community （LLC）项目，持续免费维护到 2012 年底，RSM 是 LLC 用户之一。2010 年被提名参加当年 Linux 内核峰会。

- 2010 年加入 WindRiver，从事 MIPS 平台 BSP 以及 Preempt RT, Ftrace 等 Features 研发。同年，筹备面向一线 Linux 工程师的公益性技术交流平台：泰晓科技。

- 2011 年加入魅族，从零开始组建系统优化团队，在业界率先思考体系化地解决系统稳定性、功耗、性能、发热等问题，协调研发、测试、生产、售后、流程管理等多个维度构建完整的系统核心体验保障体系。先后参与或者带领团队完成 20 多款手机系统底层软件的研发，总体规模达到数千万台。

在德累斯顿、珠海、北京和上海多次发表技术演讲，数年来，在泰晓科技公开发表了接近 200 篇技术文章，发起并维护了数个开源软件项目，撰写了多份论文和书籍，主要有：

- 2008/2015: 《C 语言编程透视》、《Shell 编程范例》

- 2009 RTLWS11: Porting RT-Preempt to Loongson2F

- 2011 RTLWS13: Tiny Linux Kernel Project: Section Garbage Collection Patchset

- 2013 ZhuhaiGDG: Android Linux 可靠性（RAS）研究与实践

- 2013 Packtpub: 《Instant Optimizing Embedded Systems Using BusyBox》

- 2015 CSDN MDCC 2015：智能手机系统优化的演进与实践

- 2016 CLK2016: Ftrace 实现原理与开发实践

- 2006~2019 开源项目
  - MIPS Ftrace
  - MIPS Preempt-RT
  - TinyLinux
  - Linux Lab
  - Linux 0.11 Lab
  - CS630 Qemu Lab
  - VnstatSVG
  - Linux Loongson Community
  - elinux.org 翻译等

欢迎阅读 [细数我与 Linux 这十三年](http://tinylab.org/falcon-and-linux) 进一步了解讲师。

[这里](http://tinylab.org/authors/#wu-zhangjin-ref) 有讲师之前陆续发表的 200 多篇技术文章汇总。


## 内容大纲

1. 开篇：古有 “庖丁解牛”，今有 “码农剖 ELF”

2. ELF 是什么？
    * Linux 支持哪些可执行文件格式
    * 可执行文件格式的演进历史
    * 各大操作系统都在用什么格式

3. Hello 可执行文件可以有多小？
    * Linux 下默认编译的 Hello.c 有多大？
    * 各大平台上的二进制 Hello 可执行文件做到了多小？
    * 大家都做了哪些尝试？

4. 基础知识筹备
    * ELF 文件格式简介
    * X86 体系结构知识
    * X86 AT&T 汇编语言
    * C 语言函数调用规范
    * ELF 工具套装介绍

5. ELF 程序的生成
    * 代码编译与编译器优化
    * 静态链接和默认链接行为
    * 共享库和动态链接
    * 汇编语言版 Hello

6. ELF 程序的执行
    * 操作系统启动过程简介
    * 按键触发程序执行的那一刻
    * 命令行参数和环境变量
    * 系统调用 Exec

7. ELF 程序的运行与退出
    * ELF 程序加载
    * 进程的内存布局
    * 进程的运行和退出
    * 进程跟踪和调试原理

8. 结语：像一个外科手术专家那样

9. 参考书目一览

## 报名方式

报名步骤如下：

**访问“阅码场”平台**

  打开 PC 浏览器，输入“阅码场”域名：<http://www.yomocode.com>

  [![阅码场首页](/images/courses/yomocode-home.jpg)](http://yomocode.com)

**用微信扫码登陆**

  点击“阅码场”首页右上角的图标会弹出一个二维码，用手机微信扫描后即可登陆

**进入『360° 剖析 Linux ELF』课程页面**

  点击“阅码场”首页左下角的该课程封面，或者直接在浏览器输入课程地址：<http://www.yomocode.com/courses/9>

  [![课程首页](/images/courses/360-elf-home.jpg)](http://yomocode.com/courses/9)

**输入专属折扣码**

  点击 “输入折扣码，获取额外折扣” 后会看到一个蓝色方框，在框内输入专属折扣码：**W26F**，使用该折扣码享受 10￥ 优惠。

  ![输入折扣码](/images/courses/360-elf-discount-code.jpg)

**支付报名费用**

  最后，根据自身方便点击 “使用微信扫码支付” 或 “支付宝扫码支付”。

当前早鸟优惠价为 599￥，使用专属折扣码（W26F）为 589￥。

预计早鸟优惠将于 8 月 31 日晚上 23 点结束，之后价格为 759￥，使用专属折扣码（W26F）为 749￥。专属折扣码一直有效。

报名后，扫描 “阅码场” 报名页右侧的客服微信二维码加好友，客服会将您拉入课程答疑和讨论微信群。

另外，为答谢大家的支持，讲师特别赠送一个小福利：持该课程购买凭证，加 9.9￥ 可订阅原价 199￥ 的[『Linux 知识星球』](http://tinylab.org/linux-planet-v1/)会员。

[1]: http://tinylab.org
